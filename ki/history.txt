2025-10-15
- [DONE] Backup-Script erweitert um latest/-Kopie
- [DONE] /history Command f√ºr KI-Partner definiert
- [DECISION] Getrennte Dateien: context.txt (statisch) vs history.txt (dynamisch)
- [DECISION] Pro Chat-Session = 1 Thema fokussieren
- [BLOCKER] Token-Limits erfordern regelm√§√üige Session-Wechsel

2025-10-15
- [DECISION] MIDI √ºber C++ raw ALSA (Python-Bindings zu instabil auf RPi5)
- [DECISION] PyGame ‚Üí DRM Migration f√ºr latenzfreies Touch-Interface

2025-10-15
- [BUG] hardware.json im GPIO-Treiber und device.py noch nicht ersetzt
- [DONE] Tauwerk-Spezifik aus context.txt in history.txt migriert
- [DONE] JSON aus C++ Treiber entfernt
- [IN_PROGRESS] INI-basierte Hardware-Konfiguration etablieren
- [DONE] Generischer INI-Parser f√ºr beliebige Controller implementiert
- [IN_PROGRESS] C++ Treiber und Python an existierende hardware.ini angepasst
- [DONE] GPIO Treiber produziert stabile Events

2025-10-15
- [DECISION] Separate Services: tauwerk_gpio.service (C++) + tauwerk.service (Python)

2025-11-08
- [DONE] Virtual Environment Setup in deployment integriert
- [DONE] System startet sauber mit venv-Aktivierung
- [DONE] Python Hauptapplikation l√§uft stabil im Loop
- [IN_PROGRESS] Python Skripte optimieren

2025-11-08
- [DONE] GPIO komplett gefixt - Encoder, Buttons, OLEDs laufen in Echtzeit
- [DONE] Framebuffer-Test erfolgreich (rotes Rechteck)
- [DONE] Farbformat BGR identifiziert und korrigiert
- [DONE] DRM-Treiber getestet (funktioniert nicht zuverl√§ssig auf Pi5)
- [DECISION] Framebuffer-Approach statt DRM f√ºr maximale Stabilit√§t
- [DONE] Pillow und evdev f√ºr Font-Rendering und Touch-Input installiert
- [IN_PROGRESS] Touchbar UI in Haupt-App integrieren (PyGame komplett durch Framebuffer ersetzen)
- [BLOCKER] Touchpad-Klasse muss Loop-Struktur anpassen f√ºr Main-Integration

2025-11-08
- [DONE] C++ Grafik-Treiber erfolgreich getestet - Shared Memory Kommunikation funktioniert perfekt
- [DONE] Kernel Console Problem gel√∂st mit vt.global_cursor_default=0
- [DECISION] C++ Komplett-Treiber statt getrennter Prozesse f√ºr maximale Performance
- [BUG] Touch Events im neuen C++ Treiber werden nicht erkannt
- [BLOCKER] Touch Device Detection in C++ muss gefixt werden
- [NEXT] Touch Input Debugging und Portierung von Calibration/Multitouch in C++

2025-11-08
- [DECISION] LockFreeEngine bleibt KERNST√úCK f√ºr MIDI/Clock Performance (0.1ms Latenz)
- [DECISION] Shared Memory nur f√ºr UI ‚Üî Python Kommunikation (1.5-3ms Latenz - ausreichend)
- [DECISION] Standard Shared Memory (Memory-Order Optimierung nur bei Bedarf)
- [ARCHITECTURE] C++ UI ‚Üí (1.5ms SM) ‚Üí Python Logic ‚Üí (0.1ms) ‚Üí LockFreeEngine ‚Üí (0.05ms) ‚Üí MIDI Hardware
- [NEXT] Komplette Shared Memory Bridge f√ºr UI-Kommunikation implementieren

2025-11-11
- [DONE] C++ Touchpad Driver mit Shared Memory Bridge implementiert
- [DONE] Python UI Bridge f√ºr Kommunikation mit C++ Treiber
- [DONE] Basic Touch-Input mit Single-Touch und Multitouch Support
- [DONE] UI Elemente: Buttons, Fader, Labels
- [DONE] Framebuffer Rendering (800x480)
- [DONE] Touch-Koordinaten korrigiert: 0-799 X, 0-479 Y
- [DONE] Collision Detection f√ºr UI Elemente
- [DONE] Touch State Management (active/hovered touches)
- [DONE] Multitouch Support implementiert
- [DECISION] Multitouch hardcoded auf true f√ºr FT5x06 Panel
- [BUG] Fader haben sp√ºrbaren Lag bei Bewegung
- [DONE] Performance Optimierungen: FPS Limiting auf 60 FPS, Python Loop auf 1000 FPS, Event Deduplication

2025-11-13
- [DONE] Multitouch Implementation und Device Detection korrigiert
- [BLOCKER] Fader Lag bei Bewegung (erneut)

2025-11-14
- [DONE] C++ Touch UI Driver komplett neu implementiert mit eigenst√§ndigem Rendering
- [DONE] Double Buffering f√ºr flackern-freies Rendering integriert
- [DONE] Time-based Animation f√ºr Smoothness
- [DONE] Shared Memory Bridge f√ºr asynchrone Python-Kommunikation

2025-11-19
- [IN_PROGRESS] DSI Display Integration auf Raspberry Pi (Display wird nicht erkannt)
- [DONE] Grundlegende Diagnostik mit modetest (zeigt nur HDMI)
- [BUG] DSI-Interface nicht initialisiert
- [BLOCKER] DSI Device Tree Overlay fehlt
- [DONE] DSI-Aktivierung √ºber /boot/config.txt erfolgreich
- [DONE] DSI Display Integration erfolgreich abgeschlossen! üéâ
- [DONE] Hardware-beschleunigtes Rendering mit OpenGL ES 2.0 funktioniert (Blauer Testscreen)
- [DONE] Alle DRM-Devices (card0=v3d, card1=drm-rp1-dsi, card2=vc4) korrekt erkannt
- [DECISION] Moderne Graphics Stack gew√§hlt: DRM/KMS + GBM + EGL/OpenGL ES 2.0
- [DECISION] Device Priority f√ºr Multi-Display: card1 (DSI) ‚Üí card2 (VC4/HDMI) ‚Üí card0 (V3D)
- [BLOCKER] Keine aktuellen Blocker! ‚úÖ Display-Stack vollst√§ndig funktionsf√§hig

2025-11-20
- [DONE] Komplettes OOP Refactoring: Monolithische test.cpp in saubere Architektur aufgeteilt
- [DONE] Neue Ordnerstruktur: src/core/, src/widgets/, src/input/
- [DONE] Widget Base Class, Label, Fader, Button Widgets, Layout Manager, Renderer Class, TouchManager implementiert
- [DONE] Main loop von 150+ auf ~20 Zeilen reduziert
- [DONE] Performance beibehalten (Adaptive 10/60 FPS, GPU-beschleunigtes Dithering)
- [DONE] Makefile TAB-Problem gel√∂st
- [DECISION] test.cpp wird zu tauwerk_touchpad.cpp (OOP-Architektur ist die neue Basis)
- [BUG] Keine bekannten Bugs nach Refactoring

2025-11-22
- [DONE] Multitouch Finger-Stack Implementation f√ºr alle Widgets
- [DONE] Fader: Letzter Finger steuert, vorheriger √ºbernimmt bei Touch-Up (Arpeggio-Verhalten)
- [DONE] Button: Multi-Finger Press Protection - Button bleibt pressed bis alle Finger weg
- [DONE] Touch-ID Propagation durch gesamtes Touch-System (Kernel tracking_id ‚Üí Widgets)
- [DONE] TouchFingerState Tracking: touch_id, start_x, last_x, value_at_start
- [DONE] Finger-Stack (LIFO) in Fader und Button implementiert
- [DONE] State-based Button Logic: Stack empty‚Üîfull = onPress/onRelease (keine spurious triggers)
- [DONE] Widget::handle_touch() erweitert mit touch_id Parameter
- [DONE] TouchManager: last_tracking_id f√ºr Release-Events, Multi-Slot auf gleichen Widgets
- [DONE] Touch-Area Bounds-Fix: Inklusive <= statt exklusive <
- [DONE] Touch Buffer von 5px auf 10px erh√∂ht f√ºr bessere Finger-Erkennung auf 45¬∞ geneigtem Touchscreen
- [DONE] SVG Logo zentriert (viewBox="17 26 335 317")
- [DONE] README.md Update: Zentriertes Logo und Titel "Building custom music gear."
- [DONE] Git Push: Commit ab15ad3 mit kompletter Multitouch Implementation
- [DECISION] 10px Touch-Buffer optimal f√ºr Finger-Rundung auf geneigtem Display
- [DECISION] Smooth Handoff zwischen Fingern durch last_x Position Tracking
- [ARCHITECTURE] Finger-Stack System: std::vector<int> + std::map<int, TouchFingerState>
- [BUG] Keine bekannten Bugs - Multitouch funktioniert stabil an allen Widget-R√§ndern
- [NEXT] Erweiterte Touch-Areas f√ºr Widgets implementieren (Touch-Reservation, Drag-Support)
- [NEXT] Button Widget verbessern (Velocity/Pressure Support pr√ºfen, Scale-Animation)
- [NEXT] Weitere UI Widgets planen (Knob, VU Meter, Multi-Page Layout System)

2025-11-22
- [DONE] Multi-Font-System implementiert mit Lazy-Loading
- [DONE] 3 Font-Typen: DEFAULT (DejaVu), DIGITAL (DS Digital Bold), ICONS (Tauwerk)
- [DONE] 4 empfohlene Gr√∂√üen: 16, 24, 32, 48px (beliebige Gr√∂√üen m√∂glich)
- [DONE] Font-Cache-System: std::map<FontCacheKey, std::map<char, Glyph>>
- [DONE] Label Widget erweitert mit FontType und Size-Parametern
- [DONE] Renderer::draw_text() mit Font-Parametern
- [DONE] Assets-Ordner f√ºr Custom-Fonts (keine System-Fonts n√∂tig)
- [DONE] Font-Demo erstellt (bin/font_demo)
- [DONE] FONTS.md Dokumentation mit Beispielen und Best Practices
- [DECISION] Assets-Pfade statt System-Fonts f√ºr Custom-Fonts (cleaner, kein Root)
- [DECISION] Lazy-Loading statt Pre-Loading (nur ben√∂tigte Fonts laden)
- [DECISION] Glyph-Cache pro Font+Gr√∂√üe (ASCII 32-127, ~96 Texturen)
- [ARCHITECTURE] FontType Enum + FontCacheKey Struct f√ºr typsicheres Font-Management
- [ARCHITECTURE] get_font_glyphs() ‚Üí pr√ºft Cache ‚Üí load_font() bei Bedarf
- [PERFORMANCE] ~500KB pro Font+Gr√∂√üe, ~4MB bei allen 3 Fonts in 4 Gr√∂√üen
- [BUG] Keine bekannten Bugs - Multi-Font-System l√§uft stabil
- [NEXT] Icon-Font tauwerk.ttf mit Custom-Icons bef√ºllen
- [NEXT] Font-Metrics f√ºr Text-Alignment (centered, right-aligned)

2025-11-22
- [DONE] Einheitliche Widget-H√∂he f√ºr Fader und Buttons (WIDGET_HEIGHT = 60)
- [DONE] Widget-Label-System: set_name() f√ºr Fader und Button
- [DONE] Name-Labels 5px √ºber Widget, linksb√ºndig, 16px DejaVuSans
- [DONE] Fader: Automatische Value-Anzeige im Fader (10px padding-left)
- [DONE] Fader: Dynamische Textfarbe (schwarz auf wei√ü, wei√ü auf dither)
- [DONE] Fader: Value-Text wird in update() automatisch aktualisiert
- [DONE] Button: Name-Label Integration
- [DONE] Widget-Demo erstellt (bin/widget_demo) - Showcase aller Features
- [DONE] FONTS.md erweitert mit Widget-Label-Beispielen
- [DECISION] Value-Display direkt im Fader (kein separates Label n√∂tig)
- [DECISION] Position-basierte Textfarbe (fill_width Check) - kein Performance-Impact
- [DECISION] Digital-Font 24px f√ºr Fader-Values (gut lesbar auf 60px H√∂he)
- [ARCHITECTURE] Fader.update() aktualisiert value_text basierend auf progress
- [ARCHITECTURE] Fader.draw() rendert Name-Label, Background, Fill, Value-Label
- [PERFORMANCE] Dynamische Textfarbe = 1x float-Vergleich pro Frame (negligible)
- [BUG] Keine bekannten Bugs - Widget-Label-System funktioniert perfekt
- [NEXT] Text-Alignment f√ºr Labels (centered, right-aligned)
- [NEXT] Fader-Value mit Custom-Formatter (BPM, Hz, dB, etc.)

2025-11-22
- [DONE] Typography-Fix: Top-Left-Positionierung statt Baseline
- [DONE] FontMetrics Struktur (ascender, descender, line_height)
- [DONE] Keine Descender/Ascender √ºber Widget-Bounds hinaus
- [DONE] Y-Position korrigiert: baseline_y = y + metrics->ascender
- [DONE] Typography-Test-Demo erstellt (bin/typography_test)
- [BUG FIXED] Descenders (p, g, q, y, j) ragten √ºber Gro√übuchstaben hinaus
- [BUG FIXED] Text-Bounding-Box passt jetzt zur angegebenen Y-Position
- [DECISION] Top-Left-Origin f√ºr UI-Text (Standard f√ºr Game/UI Engines)
- [ARCHITECTURE] font_metrics Cache parallel zu font_cache
- [ARCHITECTURE] FreeType metrics.ascender/descender beim Font-Load extrahieren
- [PERFORMANCE] Kein Impact - Metrics einmalig beim Font-Load, 1x Addition pro draw_text()
- [NEXT] Text-Baseline-Option f√ºr spezielle F√§lle (wenn ben√∂tigt)

2025-11-22
- [DONE] Widget-Labels: Uppercase und 21px Abstand (16px text + 5px gap)
- [DONE] Fader-Value: 48px Digital-Font (f√ºllt fast 60px H√∂he)
- [DONE] Fader-Value: Invert-BlendMode statt manuelle Farbwahl
- [DONE] draw_text_inverted() mit GL_ONE_MINUS_DST_COLOR
- [DONE] Button-Icons: Icon-Font Integration vorbereitet
- [DONE] Button-Icon-Gr√∂√üe: 80% der Button-H√∂he (48px bei 60px)
- [DECISION] Invert-BlendMode f√ºr Fader-Values (automatischer Kontrast)
- [DECISION] GL_ONE_MINUS_DST_COLOR + GL_ZERO (perfekt f√ºr Text-Invert)
- [DECISION] Unicode-Glyphs (0xE801) noch TODO - aktuell ASCII im Cache
- [ARCHITECTURE] BlendFunc tempor√§r gewechselt in draw_text_inverted()
- [ARCHITECTURE] BlendFunc-Restore nach Rendering (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)
- [PERFORMANCE] Invert-BlendMode = zero overhead (natives OpenGL Feature)
- [PERFORMANCE] BlendFunc-Wechsel = 1 State-Change pro Fader-Value (negligible)
- [TODO] Glyph-Cache f√ºr Unicode erweitern (aktuell nur ASCII 32-127)
- [NEXT] Unicode-Support f√ºr Icon-Font (0xE000-0xF8FF Private Use Area)

2025-11-22
- [DONE] UTF-8 Icon-Glyph-System komplett implementiert (Unicode Private Use Area)
- [DONE] Icon-Glyphs 0xE801, 0xE803 aus Tauwerk-Font geladen
- [DONE] UTF-8 3-Byte-Sequenzen Parser in draw_text() und draw_text_inverted()
- [DONE] Glyph-Cache-Mapping: UTF-8 drittes Byte als Key (0xE801‚Üí0x81, 0xE803‚Üí0x83)
- [DONE] Button-Icons: UTF-8 "\xEE\xA0\x81" f√ºr Unicode \E801
- [DONE] Titel-Icon: UTF-8 "\xEE\xA0\x83" f√ºr Unicode \E803 (Tauwerk Logo)
- [DONE] Logo-Gr√∂√üe auf 80px erh√∂ht (prominent, repr√§sentiert "Tauwerk"-Text)
- [DONE] DIGITAL-Font Rendering-Problem mit BlendMode gel√∂st
- [DONE] Invert-Fill-System: Schwarzer Rect mit Invert-BlendMode
- [DONE] draw_rect_inverted() implementiert
- [DONE] get_text_width() f√ºr pr√§zise Text-Breiten-Berechnung
- [DONE] Smart-Invert-Fader: Wei√üer Text auf Dither, automatisch schwarz auf hellem Fill
- [DECISION] UTF-8 Byte-Extraction statt Unicode-Codepoint-Lookup (simpler, schneller)
- [DECISION] Icon-Glyph-Loop beim Font-Load (explizite Unicode-Codepoints)
- [DECISION] Schwarzer Fill mit Invert-BlendMode statt wei√üer Fill
- [DECISION] Text bleibt immer wei√ü, Fill invertiert Hintergrund UND Text
- [ARCHITECTURE] UTF-8 Parsing: Erkennt 0xEE 0xA0 0x8X Pattern, extrahiert drittes Byte
- [ARCHITECTURE] Invert-System: Dither (dunkel) + Text (wei√ü) + Fill (schwarz+invert)
- [ARCHITECTURE] Fill-Invert macht: dunkler Dither‚Üíhell, wei√üer Text‚Üíschwarz
- [PERFORMANCE] UTF-8 Parsing: +1 if-Check pro Zeichen (negligible)
- [PERFORMANCE] Invert-BlendMode: Zero overhead, native GPU-Feature
- [PERFORMANCE] BlendFunc-Wechsel: ~0.001ms pro Fader (f√ºr 3-5 Fader kein Problem)
- [BUG FIXED] Icon-Glyphs zeigten schwarze Rechtecke ‚Üí UTF-8 Parsing fehlte
- [BUG FIXED] DIGITAL-Font zeigte leere Glyph-Bounds ‚Üí BlendMode auf Text war falsch
- [BUG FIXED] Invert-Rect √ºber gesamten Fader ‚Üí nur Fill bekommt Invert-BlendMode
- [NEXT] Optional: BlendMode-Batching wenn >10 Fader (aktuell nicht n√∂tig)
- [NEXT] Weitere Icon-Glyphs im Tauwerk-Font definieren (Play, Record, Sync, etc.)